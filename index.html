<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Income Expense App</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">

<h2>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h2>

<form onsubmit="addTransaction(event)">
<input type="date" id="date" required>
<input type="text" id="detail" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î" required>

<select id="type">
<option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
<option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
</select>

<input type="number" id="amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" required>
<button type="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
</form>

<div class="summary">
<p>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏ß‡∏°: <span id="totalIncome">0</span> ‡∏ö‡∏≤‡∏ó</p>
<p>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°: <span id="totalExpense">0</span> ‡∏ö‡∏≤‡∏ó</p>
<p>‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <span id="balance">0</span> ‡∏ö‡∏≤‡∏ó</p>
</div>

<button class="logout-btn" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>

</div>

<script>
// üîê ‡∏Å‡∏±‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
const isLoggedIn = localStorage.getItem("loggedIn");
if(isLoggedIn !== "true"){
window.location.href = "login.html";
}

// üì¶ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤
let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

function addTransaction(event){
event.preventDefault();

const type = document.getElementById("type").value;
const amount = parseFloat(document.getElementById("amount").value);

transactions.push({ type, amount });

localStorage.setItem("transactions", JSON.stringify(transactions));

calculate();
event.target.reset();
}

function calculate(){
let income = 0;
let expense = 0;

transactions.forEach(item => {
if(item.type === "income"){
income += item.amount;
}else{
expense += item.amount;
}
});

document.getElementById("totalIncome").innerText = income;
document.getElementById("totalExpense").innerText = expense;
document.getElementById("balance").innerText = income - expense;
}

function logout(){
localStorage.removeItem("loggedIn");
window.location.href = "login.html";
}

calculate();
</script>

</body>
</html>
